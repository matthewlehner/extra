<%= form_for @changeset, @action, fn f -> %>
  <%= if @changeset.action do %>
    <div class="alert alert-danger">
      <p>Oops, something went wrong! Please check the errors below.</p>
    </div>
  <% end %>

  <%= input f, :post_collection_id, label: gettext("collection"), collection: (@collections |> Enum.map(&{&1.name, &1.id })) %>
  <%= input f, :body, label: gettext("content"), using: :textarea %>

  <%= content_tag :div, options_for(:wrapper, f, :post_templates) do %>
    <%= EasyInput.Label.render :post_templates, options_for(:label, f, :post_templates, label: "channel") %>

    <div class="form__collection-wrapper">
      <% channel_options = options_for(:input, f, :post_templates) %>
      <%= for channel <- @channels do %>
        <%= content_tag :label do %>
          <%= checkbox f, :post_templates, EasyInput.Input.checkbox_options(f, :post_templates, channel.id, channel_options) %>
          <%= EasyInput.Input.checkbox_indicator do %>
            <%= icon(@conn, "checkmark") %>
          <% end %>
          <%= channel.name %>
        <% end %>
      <% end %>
    </div>
  <% end %>


  <div class="form__actions">
    <%= link "Cancel", to: "#", class: "button button_cancel" %>
    <%= submit "Create Post", class: "button" %>
  </div>
<% end %>
